<form [formGroup]="form" (ngSubmit)="submitForm()" class="form">
    <ng-container *ngFor="let field of fields">
        <ng-container [ngSwitch]="field.type">

            <app-input-form-row *ngSwitchCase="'text'" [label]="field.label" [control]="getControl(field.name)"
                [errorMessage]="getErrorMessage(field.name)" [placeholder]="field.placeholder || ''">
            </app-input-form-row>

            <app-input-form-row *ngSwitchCase="'textarea'" [label]="field.label" [control]="getControl(field.name)"
                [errorMessage]="getErrorMessage(field.name)" [placeholder]="field.placeholder || ''" type="textarea">
            </app-input-form-row>

        </ng-container>

    </ng-container>

    <div class="form__button">
        <app-button [disabled]="form.invalid || isLoading" type="submit">
            {{ isLoading ? 'Loading...' : 'Submit' }}
        </app-button>
    </div>

</form>